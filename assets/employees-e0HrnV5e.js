import{h as y}from"./axios-JFeCRDsi.js";import{u as w,v,D as E,c as i,a,e as g,t as c,F as C,E as B,o as p}from"./index-FJ0MJ8vU.js";const b="/employees",D=(l,d,u,r)=>y.get(`${b}?page=${l}&limit=${d}&merchant_id=${u}&status=${r}`),N=l=>y.get(`${b}/${l}`),S=l=>y.post("/employees",l),F=(l,d)=>y.put(`/employees/${l}`,d),I=l=>y.delete(`/employees/${l}`),R={class:"p-4"},U={key:0},V={key:1,class:"text-red-500"},j={key:2},L={class:"space-y-4"},M={class:"text-lg font-semibold"},P=["onClick"],q=["onClick"],z=["onClick"],A={class:"mt-4 flex justify-between"},G=["disabled"],K=w({__name:"employees",setup(l){const d=v([]),u=v(!0),r=v(""),n=v(1),h=v(10),m=async o=>{u.value=!0,r.value="",n.value=o;try{const e=await D(n.value,h.value,1,"active");d.value=e.data.data.employees}catch(e){r.value=e.message||"發生錯誤"}finally{u.value=!1}},_=async o=>{u.value=!0,r.value="";try{const e=await N(o);console.log(e),alert(`員工詳細資料：
姓名: ${e.data.data.username}
電子郵件: ${e.data.data.email}
電話: ${e.data.data.phone}`)}catch(e){r.value=e.message||"獲取詳細資料失敗"}finally{u.value=!1}},x=async()=>{var o,e;try{const s=await S({department_id:4,username:"測試員工04",email:"test04.employee@example.com",phone:"0912345678",role:"USER",position_id:5});alert("新增成功！"),console.log("新增回應:",s.data),m(n.value)}catch(t){alert("新增失敗："+(((e=(o=t.response)==null?void 0:o.data)==null?void 0:e.message)||t.message)),console.error(t)}},f=async o=>{var e,t;try{const k=await F(o,{username:"更新後的姓名",email:"updated.email@example.com",phone:"0987654321",role:"USER",position_id:3,department_id:3});alert("員工資料已更新"),console.log("更新成功:",k.data),m(n.value)}catch(s){alert("更新失敗："+(((t=(e=s.response)==null?void 0:e.data)==null?void 0:t.message)||s.message)),console.error(s)}},$=async o=>{var e,t;if(confirm("確定要刪除這位員工嗎？"))try{await I(o),alert("員工已刪除"),m(n.value)}catch(s){alert("刪除失敗："+(((t=(e=s.response)==null?void 0:e.data)==null?void 0:t.message)||s.message)),console.error(s)}};return E(()=>{m(n.value)}),(o,e)=>(p(),i("div",R,[e[2]||(e[2]=a("h2",{class:"text-xl font-bold mb-4"},"員工列表",-1)),a("button",{class:"my-2 mr-2 bg-purple-500 hover:bg-purple-600 text-white px-3 py-1 rounded",onClick:x}," 新增員工 "),u.value?(p(),i("div",U,"載入中...")):g("",!0),r.value?(p(),i("div",V,c(r.value),1)):(p(),i("div",j,[a("ul",L,[(p(!0),i(C,null,B(d.value,t=>(p(),i("li",{key:t.id,class:"border p-4 rounded-md shadow"},[a("h3",M,c(t.username),1),a("p",null,"職位："+c(t.role),1),a("p",null,"部門："+c(t.department.name),1),a("p",null,"電子郵件："+c(t.email),1),a("p",null,"聯絡電話："+c(t.phone),1),a("p",null,"狀態："+c(t.status),1),a("p",null,"商戶名稱："+c(t.merchant.name),1),a("button",{onClick:s=>_(t.id),class:"mt-2 mr-2 bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded"}," 獲取員工詳情 ",8,P),a("button",{onClick:s=>f(t.id),class:"mt-2 bg-yellow-500 hover:bg-yellow-600 text-white px-3 py-1 rounded ml-2"}," 更新員工訊息 ",8,q),a("button",{onClick:s=>$(t.id),class:"mt-2 bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded ml-2"}," 刪除員工 ",8,z)]))),128))])])),a("div",A,[n.value>1?(p(),i("button",{key:0,onClick:e[0]||(e[0]=t=>m(n.value-1)),class:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded"}," 上一頁 ")):g("",!0),a("button",{onClick:e[1]||(e[1]=t=>m(n.value+1)),disabled:d.value.length<h.value,class:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded"}," 下一頁 ",8,G)])]))}});export{K as default};
